#!/bin/bash
ARCH=$(uname -m)
logger "CCEASY: Checking architecture for x86_64 build. System is $ARCH"
if [ "$ARCH" != "x86_64" ]; then
    logger "CCEASY ERROR: Architecture mismatch. Expected x86_64, got $ARCH"
    # Try to display a dialog, but don't fail if osascript fails
    /usr/bin/osascript -e 'display dialog "This package is for Intel (x86_64) Macs only. Please install the arm64 version for Apple Silicon." buttons {"OK"} default button "OK" with icon stop' 2>/dev/null
    exit 1
fi
exit 0
